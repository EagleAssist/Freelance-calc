<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include necessary head content -->

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
</head>
<body>

<div class="container mt-5">
    <h2>History</h2>
    <table class="table" id="history-table">
        <thead>
            <tr>
                <!-- <th>Field</th> -->
                <th>Rate Type</th>
                <th>Complexity</th>
                <th>Num Pages</th>
                <th>Rate</th>
            </tr>
        </thead>
        <tbody id="history-table-body">
            <!-- History data will be inserted here using jQuery -->
        </tbody>
    </table>
</div>

<script>
  $(document).ready(function() {
      var historyData = {{ history_data|safe }};

      // No need to parse the JSON data as it's already a string
      var parsedHistoryData = historyData;

      // Initialize DataTable
      var dataTable = $('#history-table').DataTable({
          data: parsedHistoryData,
          columns: [
              // { data: 'fields.field' },
              { data: 'fields.hist_rate_type' },
              { data: 'fields.hist_complexity' },
              { data: 'fields.hist_num_pages' },
              { data: 'fields.hist_rate' }
          ]
      });
  });
</script>
</body>
</html>